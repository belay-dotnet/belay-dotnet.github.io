<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Adaptive Protocol Detection | Belay.NET</title>
    <meta name="description" content="Control MicroPython devices from .NET with zero friction">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/assets/style.BxVgYzTe.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.CCEZlVav.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.1bclsfaY.js">
    <link rel="modulepreload" href="/assets/chunks/framework.CUqMdM43.js">
    <link rel="modulepreload" href="/assets/technical_protocols_protocol-detection.md.BIWtna01.lean.js">
    <link rel="icon" type="image/svg+xml" href="/logo.svg">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <meta name="theme-color" content="#646cff">
    <meta property="og:title" content="Belay.NET">
    <meta property="og:description" content="Control MicroPython devices from .NET with zero friction">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Belay.NET">
    <meta name="twitter:description" content="Control MicroPython devices from .NET with zero friction">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-d8b57b2d><!--[--><!--]--><!--[--><span tabindex="-1" data-v-fcbfc0e0></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-fcbfc0e0>Skip to content</a><!--]--><!----><header class="VPNav" data-v-d8b57b2d data-v-7ad780c2><div class="VPNavBar" data-v-7ad780c2 data-v-9fd4d1dd><div class="wrapper" data-v-9fd4d1dd><div class="container" data-v-9fd4d1dd><div class="title" data-v-9fd4d1dd><div class="VPNavBarTitle has-sidebar" data-v-9fd4d1dd data-v-9f43907a><a class="title" href="/" data-v-9f43907a><!--[--><!--]--><!--[--><!--[--><!--[--><img class="VPImage dark logo" src="/logo-dark.svg" alt data-v-ab19afbb><!--]--><!--[--><img class="VPImage light logo" src="/logo.svg" alt data-v-ab19afbb><!--]--><!--]--><!--]--><span data-v-9f43907a>Belay.NET</span><!--[--><!--]--></a></div></div><div class="content" data-v-9fd4d1dd><div class="content-body" data-v-9fd4d1dd><!--[--><!--]--><div class="VPNavBarSearch search" data-v-9fd4d1dd><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-9fd4d1dd data-v-afb2845e><span id="main-nav-aria-label" class="visually-hidden" data-v-afb2845e> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/guide/getting-started.html" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Guide</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/examples/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Examples</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/hardware/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Hardware</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/technical/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Technical Reference</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/api/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>API Reference</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-afb2845e data-v-bfe7971f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-bfe7971f><span class="text" data-v-bfe7971f><!----><span data-v-bfe7971f>main</span><span class="vpi-chevron-down text-icon" data-v-bfe7971f></span></span></button><div class="menu" data-v-bfe7971f><div class="VPMenu" data-v-bfe7971f data-v-20ed86d6><div class="items" data-v-20ed86d6><!--[--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link" href="/api/versions.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>All Versions</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link" href="/changelog.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Changelog</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link" href="/contributing.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Contributing</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-9fd4d1dd data-v-3f90c1a5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-3f90c1a5 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-9fd4d1dd data-v-ef6192dc data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/belay-dotnet/Belay.NET" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-9fd4d1dd data-v-f953d92f data-v-bfe7971f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-bfe7971f><span class="vpi-more-horizontal icon" data-v-bfe7971f></span></button><div class="menu" data-v-bfe7971f><div class="VPMenu" data-v-bfe7971f data-v-20ed86d6><!----><!--[--><!--[--><!----><div class="group" data-v-f953d92f><div class="item appearance" data-v-f953d92f><p class="label" data-v-f953d92f>Appearance</p><div class="appearance-action" data-v-f953d92f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-f953d92f data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-f953d92f><div class="item social-links" data-v-f953d92f><div class="VPSocialLinks social-links-list" data-v-f953d92f data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/belay-dotnet/Belay.NET" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-9fd4d1dd data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-9fd4d1dd><div class="divider-line" data-v-9fd4d1dd></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-d8b57b2d data-v-2488c25a><div class="container" data-v-2488c25a><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-2488c25a><span class="vpi-align-left menu-icon" data-v-2488c25a></span><span class="menu-text" data-v-2488c25a>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-2488c25a data-v-6b867909><button data-v-6b867909>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-d8b57b2d data-v-42c4c606><div class="curtain" data-v-42c4c606></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-42c4c606><span class="visually-hidden" id="sidebar-aria-label" data-v-42c4c606> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>Overview</h2><!----></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/technical/" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Technical Reference</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 has-active" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>Protocol Documentation</h2><!----></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/technical/protocols/raw-repl-protocol.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Raw REPL Protocol Deep Dive</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/technical/protocols/raw-paste-mode.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Raw-Paste Mode and Flow Control</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/technical/protocols/protocol-detection.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Adaptive Protocol Detection</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>Architecture Documentation</h2><!----></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/technical/architecture/session-management.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Session Management Architecture</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-d8b57b2d data-v-9a6c75ad><div class="VPDoc has-sidebar has-aside" data-v-9a6c75ad data-v-e6f2a212><!--[--><!--]--><div class="container" data-v-e6f2a212><div class="aside" data-v-e6f2a212><div class="aside-curtain" data-v-e6f2a212></div><div class="aside-container" data-v-e6f2a212><div class="aside-content" data-v-e6f2a212><div class="VPDocAside" data-v-e6f2a212 data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb998dce data-v-f610f197><div class="content" data-v-f610f197><div class="outline-marker" data-v-f610f197></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-f610f197>On this page</div><ul class="VPDocOutlineItem root" data-v-f610f197 data-v-53c99d69><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-e6f2a212><div class="content-container" data-v-e6f2a212><!--[--><!--]--><main class="main" data-v-e6f2a212><div style="position:relative;" class="vp-doc _technical_protocols_protocol-detection" data-v-e6f2a212><div><h1 id="adaptive-protocol-detection" tabindex="-1">Adaptive Protocol Detection <a class="header-anchor" href="#adaptive-protocol-detection" aria-label="Permalink to &quot;Adaptive Protocol Detection&quot;">​</a></h1><p>Belay.NET&#39;s adaptive protocol detection system automatically identifies device capabilities and optimizes communication parameters in real-time. This ensures optimal performance across the wide variety of MicroPython devices without requiring device-specific configuration profiles.</p><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><h3 id="the-problem" tabindex="-1">The Problem <a class="header-anchor" href="#the-problem" aria-label="Permalink to &quot;The Problem&quot;">​</a></h3><p>MicroPython devices vary significantly in their protocol capabilities:</p><ul><li><strong>Buffer Sizes</strong>: From 32 bytes (minimal CircuitPython) to 2KB (STM32 Pyboard)</li><li><strong>Flow Control</strong>: Some devices support raw-paste mode, others don&#39;t</li><li><strong>Timing Sensitivity</strong>: Response times vary from 10ms to several seconds</li><li><strong>Platform Quirks</strong>: ESP32 USB CDC behavior differs from STM32 native USB</li></ul><h3 id="the-solution" tabindex="-1">The Solution <a class="header-anchor" href="#the-solution" aria-label="Permalink to &quot;The Solution&quot;">​</a></h3><p>Adaptive protocol detection provides:</p><ol><li><strong>Automatic Capability Discovery</strong>: Runtime detection of device features</li><li><strong>Performance Optimization</strong>: Real-time parameter tuning based on device behavior</li><li><strong>Fallback Strategies</strong>: Graceful degradation when advanced features aren&#39;t available</li><li><strong>Zero Configuration</strong>: Works out-of-the-box with any MicroPython device</li></ol><h2 id="detection-process" tabindex="-1">Detection Process <a class="header-anchor" href="#detection-process" aria-label="Permalink to &quot;Detection Process&quot;">​</a></h2><h3 id="phase-1-basic-repl-validation" tabindex="-1">Phase 1: Basic REPL Validation <a class="header-anchor" href="#phase-1-basic-repl-validation" aria-label="Permalink to &quot;Phase 1: Basic REPL Validation&quot;">​</a></h3><p>The first phase establishes basic Raw REPL communication:</p><div class="language-csharp vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Task</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DeviceReplCapabilities</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DetectBasicCapabilitiesAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    CancellationToken</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> cancellationToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> capabilities</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DeviceReplCapabilities</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> stopwatch</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Stopwatch.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">StartNew</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Test basic raw mode entry</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> EnterRawModeAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cancellationToken);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        capabilities.SupportsRawMode </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        capabilities.BasicResponseTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> stopwatch.Elapsed;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LogDebug</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Basic REPL capability confirmed in {ResponseTime}ms&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            stopwatch.ElapsedMilliseconds);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Exception</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ex</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LogWarning</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Basic REPL detection failed: {Error}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ex.Message);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        capabilities.SupportsRawMode </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> capabilities;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> capabilities;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p><strong>Detection Tests:</strong></p><ul><li>Raw mode entry (<code>0x01</code> → <code>raw REPL</code> response)</li><li>Basic command execution (<code>print(&#39;test&#39;)</code>)</li><li>Response time measurement</li><li>Character encoding validation</li></ul><h3 id="phase-2-advanced-feature-detection" tabindex="-1">Phase 2: Advanced Feature Detection <a class="header-anchor" href="#phase-2-advanced-feature-detection" aria-label="Permalink to &quot;Phase 2: Advanced Feature Detection&quot;">​</a></h3><p>Once basic communication is established, advanced features are probed:</p><div class="language-csharp vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Task</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DetectRawPasteModeAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    DeviceReplCapabilities</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> capabilities</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CancellationToken</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> cancellationToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Send raw-paste initialization sequence</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> stream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">WriteAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(RAWPASTE_INIT, cancellationToken); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// [0x05, &#39;A&#39;, 0x01]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Wait for confirmation with timeout</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        using</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> timeoutCts</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CancellationTokenSource.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CreateLinkedTokenSource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cancellationToken);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        timeoutCts.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CancelAfter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rawPasteDetectionTimeout);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        byte</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> byte</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> bytesRead</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> stream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ReadAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response, timeoutCts.Token);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (bytesRead </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">byte</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;R&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // Extract window size (16-bit little-endian)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            capabilities.MaxWindowSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BitConverter.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ToUInt16</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            capabilities.SupportsRawPasteMode </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LogDebug</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Raw-paste mode detected with window size: {WindowSize}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                capabilities.MaxWindowSize);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">OperationCanceledException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LogDebug</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Raw-paste mode detection timeout - not supported&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Exception</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ex</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LogDebug</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Raw-paste mode detection failed: {Error}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ex.Message);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    capabilities.SupportsRawPasteMode </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><p><strong>Advanced Detection Tests:</strong></p><ul><li>Raw-paste mode support (<code>0x05 &#39;A&#39; 0x01</code> → <code>&#39;R&#39;</code> response)</li><li>Window size extraction from device response</li><li>Flow control behavior validation</li><li>Large transfer capability assessment</li></ul><h3 id="phase-3-performance-characterization" tabindex="-1">Phase 3: Performance Characterization <a class="header-anchor" href="#phase-3-performance-characterization" aria-label="Permalink to &quot;Phase 3: Performance Characterization&quot;">​</a></h3><p>The final phase measures device performance characteristics:</p><div class="language-csharp vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Task</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CharacterizeDevicePerformanceAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    DeviceReplCapabilities</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> capabilities</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CancellationToken</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> cancellationToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> performanceTests</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Small Command&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1+1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Medium Code&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GenerateMediumTestCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Large Transfer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GenerateLargeTestCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> responseTimes</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> List</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TimeSpan</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    foreach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">testName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">code</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">expectedMs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> performanceTests)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> stopwatch</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Stopwatch.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">StartNew</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        try</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ExecuteCodeAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(code, cancellationToken);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            stopwatch.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Stop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            responseTimes.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(stopwatch.Elapsed);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LogTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{TestName} completed in {ElapsedMs}ms&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                testName, stopwatch.ElapsedMilliseconds);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Exception</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ex</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LogWarning</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{TestName} failed: {Error}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, testName, ex.Message);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Calculate performance characteristics</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    capabilities.AverageResponseTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TimeSpan.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FromMilliseconds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        responseTimes.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Average</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">t</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> t.TotalMilliseconds));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    capabilities.ResponseTimeVariability </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CalculateStandardDeviation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(responseTimes);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    capabilities.RequiresExtendedStartup </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> responseTimes.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">First</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TimeSpan.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FromSeconds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Determine optimal parameters based on performance</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    DetermineOptimalParameters</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(capabilities);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><p><strong>Performance Metrics:</strong></p><ul><li>Average response time across different code sizes</li><li>Response time variability (standard deviation)</li><li>Startup delay requirements</li><li>Transfer throughput characteristics</li></ul><h2 id="device-fingerprinting" tabindex="-1">Device Fingerprinting <a class="header-anchor" href="#device-fingerprinting" aria-label="Permalink to &quot;Device Fingerprinting&quot;">​</a></h2><h3 id="platform-detection" tabindex="-1">Platform Detection <a class="header-anchor" href="#platform-detection" aria-label="Permalink to &quot;Platform Detection&quot;">​</a></h3><p>Device platform identification uses multiple detection methods:</p><div class="language-csharp vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Task</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DetectDevicePlatformAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CancellationToken</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> cancellationToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Execute platform detection code</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> platformInfo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ExecuteAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Dictionary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt;(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;platform&#39;: sys.platform,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;implementation&#39;: sys.implementation.name,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;version&#39;: &#39;.&#39;.join(map(str, sys.version_info[:3])),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;unique_id&#39;: ubinascii.hexlify(machine.unique_id()).decode() if hasattr(machine, &#39;unique_id&#39;) else &#39;unknown&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, cancellationToken);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ClassifyPlatform</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(platformInfo);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Exception</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ex</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LogWarning</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Platform detection failed, using fallback: {Error}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ex.Message);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;unknown&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> string</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ClassifyPlatform</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Dictionary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">info</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> info[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;platform&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">switch</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;esp32&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> info[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;implementation&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;circuitpython&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;esp32-circuitpython&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;esp32-micropython&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;stm32&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;pyboard&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;rp2&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> info[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;implementation&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;circuitpython&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;pico-circuitpython&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;pico-micropython&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;linux&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;unix-port&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        _</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> $&quot;unknown-{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">info</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[&quot;platform&quot;]}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h3 id="capability-mapping" tabindex="-1">Capability Mapping <a class="header-anchor" href="#capability-mapping" aria-label="Permalink to &quot;Capability Mapping&quot;">​</a></h3><p>Based on detected platform, default capabilities are established:</p><div class="language-csharp vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ApplyPlatformDefaults</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DeviceReplCapabilities</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> capabilities</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> platform</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defaults</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> platform </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">switch</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;esp32-micropython&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CapabilityDefaults</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            PreferredWindowSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            StartupDelayMs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            InterruptDelayMs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            MaxRetryAttempts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            BaseResponseTimeoutMs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2000</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;pyboard&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CapabilityDefaults</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            PreferredWindowSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 256</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            StartupDelayMs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            InterruptDelayMs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            MaxRetryAttempts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            BaseResponseTimeoutMs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1000</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;pico-micropython&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CapabilityDefaults</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            PreferredWindowSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 128</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            StartupDelayMs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            InterruptDelayMs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 75</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            MaxRetryAttempts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            BaseResponseTimeoutMs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1500</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        _</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CapabilityDefaults</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            PreferredWindowSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            StartupDelayMs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            InterruptDelayMs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            MaxRetryAttempts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            BaseResponseTimeoutMs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3000</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    ApplyDefaults</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(capabilities, defaults);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><h2 id="adaptive-parameter-optimization" tabindex="-1">Adaptive Parameter Optimization <a class="header-anchor" href="#adaptive-parameter-optimization" aria-label="Permalink to &quot;Adaptive Parameter Optimization&quot;">​</a></h2><h3 id="real-time-adjustment" tabindex="-1">Real-Time Adjustment <a class="header-anchor" href="#real-time-adjustment" aria-label="Permalink to &quot;Real-Time Adjustment&quot;">​</a></h3><p>Parameters are continuously optimized based on actual performance:</p><div class="language-csharp vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AdaptiveParameterOptimizer</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> readonly</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Dictionary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PerformanceHistory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">deviceHistory</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RecordOperationPerformance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> deviceId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> operation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        TimeSpan</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> duration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">bool</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> success</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> dataSize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">deviceHistory.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TryGetValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(deviceId, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">out</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> history</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            history </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PerformanceHistory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            deviceHistory[deviceId] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> history;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sample</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PerformanceSample</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Operation </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> operation,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Duration </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> duration,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Success </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> success,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            DataSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dataSize,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Timestamp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DateTime.UtcNow</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        history.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AddSample</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sample);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Trigger parameter adjustment if needed</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (history.SampleCount </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            OptimizeParameters</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(deviceId, history);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> OptimizeParameters</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> deviceId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PerformanceHistory</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> history</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> recentSamples</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> history.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GetRecentSamples</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(TimeSpan.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FromMinutes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> successRate</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> recentSamples.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Count</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">s</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> s.Success) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">double</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)recentSamples.Count;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> avgResponseTime</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> recentSamples.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Average</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">s</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> s.Duration.TotalMilliseconds);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Adjust window size based on performance</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (successRate </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.9</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> avgResponseTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // Poor performance, reduce window size</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            capabilities.PreferredWindowSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Max</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, capabilities.PreferredWindowSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LogInformation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Reduced window size to {WindowSize} due to poor performance&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                capabilities.PreferredWindowSize);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (successRate </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.95</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> avgResponseTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // Good performance, can increase window size</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            capabilities.PreferredWindowSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Min</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">512</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, capabilities.PreferredWindowSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LogInformation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Increased window size to {WindowSize} due to good performance&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                capabilities.PreferredWindowSize);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Adjust timeouts based on actual response times</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> p95ResponseTime</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CalculatePercentile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(recentSamples.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Select</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">s</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> s.Duration), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.95</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        capabilities.BaseResponseTimeoutMs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)(p95ResponseTime.TotalMilliseconds </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br></div></div><h3 id="learning-and-persistence" tabindex="-1">Learning and Persistence <a class="header-anchor" href="#learning-and-persistence" aria-label="Permalink to &quot;Learning and Persistence&quot;">​</a></h3><p>Device-specific optimizations are persisted for future sessions:</p><div class="language-csharp vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DeviceCapabilityCache</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> readonly</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> string</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> cacheFilePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Task</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SaveCapabilitiesAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> deviceId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DeviceReplCapabilities</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> capabilities</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> cacheEntry</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CapabilityCacheEntry</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            DeviceId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> deviceId,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Platform </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> capabilities.DetectedPlatform,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Capabilities </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> capabilities,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            LastUpdated </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DateTime.UtcNow,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            LearningDataVersion </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CURRENT_VERSION</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> json</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> JsonSerializer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Serialize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cacheEntry, jsonOptions);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> File.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">WriteAllTextAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GetCacheFilePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(deviceId), json);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LogDebug</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Saved capabilities for device {DeviceId}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, deviceId);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Task</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DeviceReplCapabilities</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">?&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LoadCapabilitiesAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> deviceId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        try</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> filePath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GetCacheFilePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(deviceId);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">File.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Exists</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(filePath))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> json</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> File.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ReadAllTextAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(filePath);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> cacheEntry</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> JsonSerializer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Deserialize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CapabilityCacheEntry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;(json, jsonOptions);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // Validate cache entry age and version</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (cacheEntry </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                DateTime.UtcNow </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cacheEntry.LastUpdated </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TimeSpan.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FromDays</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">7</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                cacheEntry.LearningDataVersion </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CURRENT_VERSION)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LogDebug</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Cache entry for device {DeviceId} is stale, ignoring&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, deviceId);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LogDebug</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Loaded cached capabilities for device {DeviceId}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, deviceId);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cacheEntry.Capabilities;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Exception</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ex</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LogWarning</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Failed to load capabilities cache for device {DeviceId}: {Error}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                deviceId, ex.Message);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><h2 id="fallback-strategies" tabindex="-1">Fallback Strategies <a class="header-anchor" href="#fallback-strategies" aria-label="Permalink to &quot;Fallback Strategies&quot;">​</a></h2><h3 id="progressive-degradation" tabindex="-1">Progressive Degradation <a class="header-anchor" href="#progressive-degradation" aria-label="Permalink to &quot;Progressive Degradation&quot;">​</a></h3><p>When advanced features fail, the system gracefully falls back:</p><div class="language-csharp vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Task</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ExecuteWithReliableProtocolAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> code</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CancellationToken</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> cancellationToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> strategies</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> List</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Task</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt;&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Strategy 1: Raw-paste mode with detected window size</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ExecuteWithRawPasteModeAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(code, capabilities.PreferredWindowSize, cancellationToken),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Strategy 2: Raw-paste mode with conservative window</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ExecuteWithRawPasteModeAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(code, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, cancellationToken),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Strategy 3: Chunked raw mode</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ExecuteWithChunkedRawModeAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(code, capabilities.PreferredWindowSize, cancellationToken),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Strategy 4: Small chunk raw mode</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ExecuteWithChunkedRawModeAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(code, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, cancellationToken),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Strategy 5: Line-by-line raw mode (slowest but most compatible)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ExecuteWithLineByLineAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(code, cancellationToken)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    Exception</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">? </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lastException</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> strategies.Count; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        try</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> strategies[i]();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LogInformation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Code execution succeeded using fallback strategy {StrategyIndex}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // Update capability flags to reflect what actually works</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                UpdateCapabilitiesFromFallback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Exception</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ex</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            lastException </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ex;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LogWarning</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Execution strategy {StrategyIndex} failed: {Error}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ex.Message);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // Reset device state before trying next strategy</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SoftResetDeviceAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cancellationToken);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Task.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Delay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(capabilities.InterruptDelayMs, cancellationToken);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DeviceProtocolException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;All execution strategies failed&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lastException);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div><h3 id="error-recovery" tabindex="-1">Error Recovery <a class="header-anchor" href="#error-recovery" aria-label="Permalink to &quot;Error Recovery&quot;">​</a></h3><p>Sophisticated error recovery handles various failure modes:</p><div class="language-csharp vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Task</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HandleDetectionFailureAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DetectionFailureType</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> failureType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    Exception</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> exception</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CancellationToken</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> cancellationToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LogWarning</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Detection failure of type {FailureType}: {Error}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, failureType, exception.Message);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    switch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (failureType)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        case</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DetectionFailureType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Timeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // Device may be slow to respond</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            capabilities.StartupDelayMs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Min</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(capabilities.StartupDelayMs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            capabilities.BaseResponseTimeoutMs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Min</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(capabilities.BaseResponseTimeoutMs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">30000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        case</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DetectionFailureType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ProtocolError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // Device may not support advanced features</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            capabilities.SupportsRawPasteMode </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            capabilities.PreferredWindowSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        case</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DetectionFailureType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ConnectionLost</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // Hardware connection issue</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ReestablishConnectionAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cancellationToken);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        case</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DetectionFailureType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DeviceReset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // Device reset during detection</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Task.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Delay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, cancellationToken); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Allow full boot</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            capabilities.RequiresExtendedStartup </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Mark capability as unreliable for future reference</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    capabilities.ReliabilityScore </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Max</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, capabilities.ReliabilityScore </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h2 id="configuration-integration" tabindex="-1">Configuration Integration <a class="header-anchor" href="#configuration-integration" aria-label="Permalink to &quot;Configuration Integration&quot;">​</a></h2><h3 id="configurable-detection-behavior" tabindex="-1">Configurable Detection Behavior <a class="header-anchor" href="#configurable-detection-behavior" aria-label="Permalink to &quot;Configurable Detection Behavior&quot;">​</a></h3><p>Users can control detection behavior through configuration:</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;Protocol&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;Detection&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;EnableAutoDetection&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;DetectionTimeoutMs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;MaxDetectionAttempts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;EnableCapabilityCaching&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;CacheExpirationDays&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">7</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;FallbackStrategy&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Progressive&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;SkipPerformanceCharacterization&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="manual-override-options" tabindex="-1">Manual Override Options <a class="header-anchor" href="#manual-override-options" aria-label="Permalink to &quot;Manual Override Options&quot;">​</a></h3><p>Critical scenarios can override detection:</p><div class="language-csharp vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RawReplConfiguration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Disable auto-detection for time-critical applications</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    EnableRawPasteAutoDetection </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Force specific parameters</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    PreferredWindowSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    BaseResponseTimeoutMs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    MaxRetryAttempts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Override detected capabilities</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ForceCapabilityOverrides </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Dictionary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;SupportsRawPasteMode&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;RequiresExtendedStartup&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="monitoring-and-diagnostics" tabindex="-1">Monitoring and Diagnostics <a class="header-anchor" href="#monitoring-and-diagnostics" aria-label="Permalink to &quot;Monitoring and Diagnostics&quot;">​</a></h2><h3 id="detection-logging" tabindex="-1">Detection Logging <a class="header-anchor" href="#detection-logging" aria-label="Permalink to &quot;Detection Logging&quot;">​</a></h3><p>Comprehensive logging provides insight into the detection process:</p><div class="language-csharp vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LogInformation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Starting adaptive protocol detection for device {DeviceId}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, deviceId);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LogDebug</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Phase 1: Basic REPL validation&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LogDebug</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Raw mode entry successful, response time: {ResponseTime}ms&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, responseTime);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LogDebug</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Phase 2: Advanced feature detection&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LogDebug</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Raw-paste mode {Status}, window size: {WindowSize}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    supportsRawPaste </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;supported&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;not supported&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, windowSize);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LogDebug</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Phase 3: Performance characterization&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LogDebug</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Average response time: {AvgTime}ms, variability: {Variability}ms&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    avgTime, variability);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LogInformation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Detection complete. Platform: {Platform}, Reliability: {Score:P1}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    platform, reliabilityScore);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="performance-metrics" tabindex="-1">Performance Metrics <a class="header-anchor" href="#performance-metrics" aria-label="Permalink to &quot;Performance Metrics&quot;">​</a></h3><p>Detection performance is tracked and reported:</p><div class="language-csharp vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ProtocolDetectionMetrics</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TimeSpan</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TotalDetectionTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DetectionAttempts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Dictionary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TimeSpan</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PhaseTimings</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> double</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ReliabilityScore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> List</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FallbacksUsed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Dictionary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DetectedCapabilities</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="testing-and-validation" tabindex="-1">Testing and Validation <a class="header-anchor" href="#testing-and-validation" aria-label="Permalink to &quot;Testing and Validation&quot;">​</a></h2><h3 id="detection-test-suite" tabindex="-1">Detection Test Suite <a class="header-anchor" href="#detection-test-suite" aria-label="Permalink to &quot;Detection Test Suite&quot;">​</a></h3><p>Comprehensive testing validates detection accuracy:</p><div class="language-csharp vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TestClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ProtocolDetectionTests</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TestMethod</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Task</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DetectESP32Capabilities_ShouldIdentifyCorrectFeatures</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Arrange</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> mockDevice</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CreateMockESP32Device</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> detector</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AdaptiveProtocolDetector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Act</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> capabilities</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> detector.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DetectCapabilitiesAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mockDevice);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Assert</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Assert.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AreEqual</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;esp32-micropython&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, capabilities.DetectedPlatform);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Assert.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">IsTrue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(capabilities.SupportsRawPasteMode);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Assert.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AreEqual</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, capabilities.PreferredWindowSize);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Assert.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">IsTrue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(capabilities.RequiresExtendedStartup);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TestMethod</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Task</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FallbackStrategy_WhenRawPasteFails_ShouldUseChunkedMode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Arrange</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> mockDevice</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CreateUnreliableDevice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> protocol</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AdaptiveRawReplProtocol</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mockDevice);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Act</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> protocol.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ExecuteWithReliableProtocolAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;print(&#39;test&#39;)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Assert</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Assert.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AreEqual</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;test&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, result.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Trim</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Assert.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">IsFalse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(protocol.Capabilities.SupportsRawPasteMode); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Should be disabled after fallback</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h3 id="performance-benchmarking" tabindex="-1">Performance Benchmarking <a class="header-anchor" href="#performance-benchmarking" aria-label="Permalink to &quot;Performance Benchmarking&quot;">​</a></h3><p>Detection performance is benchmarked across devices:</p><div class="language-csharp vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TestMethod</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Task</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DetectionPerformance_ShouldCompleteWithinTimeLimit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> stopwatch</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Stopwatch.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">StartNew</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> capabilities</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> detector.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DetectCapabilitiesAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(testDevice);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    stopwatch.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Stop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Assert.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">IsTrue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(stopwatch.Elapsed </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TimeSpan.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FromSeconds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        $&quot;Detection took {</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">stopwatch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Elapsed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">TotalSeconds</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">F1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} seconds, exceeding 10s limit&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="related-documentation" tabindex="-1">Related Documentation <a class="header-anchor" href="#related-documentation" aria-label="Permalink to &quot;Related Documentation&quot;">​</a></h2><ul><li><a href="/technical/protocols/raw-repl-protocol.html">Raw REPL Protocol Deep Dive</a> - Protocol fundamentals</li><li><a href="/technical/protocols/raw-paste-mode.html">Raw-Paste Mode and Flow Control</a> - Advanced flow control</li><li><a href="/guide/configuration.html#adaptive-repl-protocol-configuration">Configuration Guide</a> - Configuration options</li><li>Device-Specific Variations - Platform differences <em>(documentation coming soon)</em></li></ul><h2 id="best-practices" tabindex="-1">Best Practices <a class="header-anchor" href="#best-practices" aria-label="Permalink to &quot;Best Practices&quot;">​</a></h2><h3 id="when-to-disable-auto-detection" tabindex="-1">When to Disable Auto-Detection <a class="header-anchor" href="#when-to-disable-auto-detection" aria-label="Permalink to &quot;When to Disable Auto-Detection&quot;">​</a></h3><ul><li><strong>Time-critical applications</strong>: Skip detection for predictable environments</li><li><strong>Known devices</strong>: Use cached capabilities for devices with known characteristics</li><li><strong>Production deployment</strong>: Consider disabling characterization phase for faster startup</li></ul><h3 id="optimizing-detection-performance" tabindex="-1">Optimizing Detection Performance <a class="header-anchor" href="#optimizing-detection-performance" aria-label="Permalink to &quot;Optimizing Detection Performance&quot;">​</a></h3><ul><li><strong>Enable caching</strong>: Persistent capability storage reduces repeated detection</li><li><strong>Tune timeouts</strong>: Adjust detection timeouts based on your device mix</li><li><strong>Monitor metrics</strong>: Track detection success rates and performance</li></ul><h3 id="troubleshooting-detection-issues" tabindex="-1">Troubleshooting Detection Issues <a class="header-anchor" href="#troubleshooting-detection-issues" aria-label="Permalink to &quot;Troubleshooting Detection Issues&quot;">​</a></h3><ul><li><strong>Enable verbose logging</strong>: Set log level to Trace for detailed detection information</li><li><strong>Check device state</strong>: Ensure device is in clean state before detection</li><li><strong>Validate connections</strong>: Poor connections can cause false capability detection</li></ul></div></div></main><footer class="VPDocFooter" data-v-e6f2a212 data-v-1bcd8184><!--[--><!--]--><div class="edit-info" data-v-1bcd8184><div class="edit-link" data-v-1bcd8184><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/belay-dotnet/belay-dotnet.github.io/edit/main/technical/protocols/protocol-detection.md" target="_blank" rel="noreferrer" data-v-1bcd8184><!--[--><span class="vpi-square-pen edit-link-icon" data-v-1bcd8184></span> Edit this page on GitHub<!--]--></a></div><!----></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-1bcd8184><span class="visually-hidden" id="doc-footer-aria-label" data-v-1bcd8184>Pager</span><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link prev" href="/technical/protocols/raw-paste-mode.html" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>Previous page</span><span class="title" data-v-1bcd8184>Raw-Paste Mode and Flow Control</span><!--]--></a></div><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link next" href="/technical/architecture/session-management.html" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>Next page</span><span class="title" data-v-1bcd8184>Session Management Architecture</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-d8b57b2d data-v-566314d4><div class="container" data-v-566314d4><p class="message" data-v-566314d4>Released under the Apache License 2.0.</p><p class="copyright" data-v-566314d4>Copyright © 2025 Belay.NET Contributors</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"api_generated_belay.attributes.md\":\"DhacSPQU\",\"api_generated_belay.attributes.pythoncodeattribute.-ctor.md\":\"Ba0LNOOb\",\"api_generated_belay.attributes.pythoncodeattribute.code.md\":\"CnYHoaRr\",\"api_generated_belay.attributes.pythoncodeattribute.enableparametersubstitution.md\":\"BVcIu_Ft\",\"api_generated_belay.attributes.pythoncodeattribute.md\":\"v5qq-h1v\",\"api_generated_belay.attributes.pythoncodeattribute.tostring.md\":\"C8Fi4ixv\",\"api_generated_belay.attributes.setupattribute.-ctor.md\":\"CIp0Nhd3\",\"api_generated_belay.attributes.setupattribute.critical.md\":\"BmoHlklO\",\"api_generated_belay.attributes.setupattribute.md\":\"DAASDI8s\",\"api_generated_belay.attributes.setupattribute.order.md\":\"DBSb0b-U\",\"api_generated_belay.attributes.setupattribute.timeoutms.md\":\"Ck0-g94e\",\"api_generated_belay.attributes.setupattribute.tostring.md\":\"D84IaKFb\",\"api_generated_belay.attributes.taskattribute.-ctor.md\":\"BaAyWe8J\",\"api_generated_belay.attributes.taskattribute.cache.md\":\"C1Pz4RdS\",\"api_generated_belay.attributes.taskattribute.exclusive.md\":\"B_iZHkTh\",\"api_generated_belay.attributes.taskattribute.md\":\"BYEF5l9V\",\"api_generated_belay.attributes.taskattribute.name.md\":\"CYo1g201\",\"api_generated_belay.attributes.taskattribute.timeoutms.md\":\"Z151ZTq1\",\"api_generated_belay.attributes.taskattribute.tostring.md\":\"CWgwof0b\",\"api_generated_belay.attributes.teardownattribute.-ctor.md\":\"CSjO-sx3\",\"api_generated_belay.attributes.teardownattribute.critical.md\":\"BmAjJpcg\",\"api_generated_belay.attributes.teardownattribute.ignoreerrors.md\":\"BhEWkoW_\",\"api_generated_belay.attributes.teardownattribute.md\":\"DYNJlYqP\",\"api_generated_belay.attributes.teardownattribute.order.md\":\"ByF10FI_\",\"api_generated_belay.attributes.teardownattribute.timeoutms.md\":\"DFMPSERJ\",\"api_generated_belay.attributes.teardownattribute.tostring.md\":\"BK2yIOMB\",\"api_generated_belay.attributes.threadattribute.-ctor.md\":\"D0DcwsKJ\",\"api_generated_belay.attributes.threadattribute.autorestart.md\":\"BnaCTwCP\",\"api_generated_belay.attributes.threadattribute.maxruntimems.md\":\"kz63fkR7\",\"api_generated_belay.attributes.threadattribute.md\":\"DM7oSVn7\",\"api_generated_belay.attributes.threadattribute.name.md\":\"BsqUc1nc\",\"api_generated_belay.attributes.threadattribute.priority.md\":\"DYK02lb2\",\"api_generated_belay.attributes.threadattribute.tostring.md\":\"CE6kQtKS\",\"api_generated_belay.attributes.threadpriority.md\":\"BlzIzs1F\",\"api_generated_belay.core.adaptiverawreplprotocol.-ctor.md\":\"CGtLa_T2\",\"api_generated_belay.core.adaptiverawreplprotocol.configuration.md\":\"BH_A2_Sk\",\"api_generated_belay.core.adaptiverawreplprotocol.currentstate.md\":\"CgoRaypA\",\"api_generated_belay.core.adaptiverawreplprotocol.detectedcapabilities.md\":\"DNxguT70\",\"api_generated_belay.core.adaptiverawreplprotocol.dispose.md\":\"BLNkq-bi\",\"api_generated_belay.core.adaptiverawreplprotocol.executecodeasync.md\":\"DzYqroth\",\"api_generated_belay.core.adaptiverawreplprotocol.initializeasync.md\":\"BTjPIvf2\",\"api_generated_belay.core.adaptiverawreplprotocol.md\":\"DD5_FPCf\",\"api_generated_belay.core.adaptiverawreplprotocol.metrics.md\":\"CNl7osp8\",\"api_generated_belay.core.attributehandler.executemethod.md\":\"CMARMjSV\",\"api_generated_belay.core.attributehandler.md\":\"DZVlPl1_\",\"api_generated_belay.core.device.-ctor.md\":\"jzv_3N3v\",\"api_generated_belay.core.device.connectasync.md\":\"DAy6BZqa\",\"api_generated_belay.core.device.connectionstate.md\":\"Db4eW5Xv\",\"api_generated_belay.core.device.disconnectasync.md\":\"CBToO5Jj\",\"api_generated_belay.core.device.discoverdevicesasync.md\":\"CRbp5kiq\",\"api_generated_belay.core.device.discoverfirstasync.md\":\"CSIZ63cj\",\"api_generated_belay.core.device.dispose.md\":\"BRH1iIJp\",\"api_generated_belay.core.device.executeasync.md\":\"BKt6Ksi_\",\"api_generated_belay.core.device.executemethodasync.md\":\"BupSPoCv\",\"api_generated_belay.core.device.executor.md\":\"CNE8O8r9\",\"api_generated_belay.core.device.fromconnectionstring.md\":\"CknQ4WQE\",\"api_generated_belay.core.device.getfileasync.md\":\"DxZdsqxZ\",\"api_generated_belay.core.device.md\":\"C5MxQiyF\",\"api_generated_belay.core.device.outputreceived.md\":\"B8VmTKa3\",\"api_generated_belay.core.device.putfileasync.md\":\"DpGSFjYO\",\"api_generated_belay.core.device.state.md\":\"Bkz4_LWg\",\"api_generated_belay.core.device.statechanged.md\":\"UuxSmCg1\",\"api_generated_belay.core.deviceconnection.-ctor.md\":\"CVb8cBZy\",\"api_generated_belay.core.deviceconnection.connectasync.md\":\"BmNUcC0n\",\"api_generated_belay.core.deviceconnection.connectionstring.md\":\"Be8XusuP\",\"api_generated_belay.core.deviceconnection.connectiontype.md\":\"B52u_woc\",\"api_generated_belay.core.deviceconnection.disconnectasync.md\":\"C2rN4bAl\",\"api_generated_belay.core.deviceconnection.dispose.md\":\"ByGhmbJT\",\"api_generated_belay.core.deviceconnection.executeasync.md\":\"m4Aqqa2g\",\"api_generated_belay.core.deviceconnection.getfileasync.md\":\"DipPCYj0\",\"api_generated_belay.core.deviceconnection.md\":\"CFD_WmMc\",\"api_generated_belay.core.deviceconnection.outputreceived.md\":\"Ds_upGlN\",\"api_generated_belay.core.deviceconnection.putfileasync.md\":\"Baa-6sNx\",\"api_generated_belay.core.deviceconnection.state.md\":\"fOC-_tPh\",\"api_generated_belay.core.deviceconnection.statechanged.md\":\"B8jJilE0\",\"api_generated_belay.core.deviceconnection.type.md\":\"CqpeCUiI\",\"api_generated_belay.core.deviceconnectionstate.md\":\"DpyIbfKS\",\"api_generated_belay.core.devicediscovery.discoverdevicesasync.md\":\"BDbjs7kn\",\"api_generated_belay.core.devicediscovery.discoverfirstasync.md\":\"D3CFu2gN\",\"api_generated_belay.core.devicediscovery.md\":\"DCnPBzqV\",\"api_generated_belay.core.deviceexception.-ctor.md\":\"CRNUZ5tD\",\"api_generated_belay.core.deviceexception.executedcode.md\":\"DBQ0WVJd\",\"api_generated_belay.core.deviceexception.md\":\"Bm_XcKtZ\",\"api_generated_belay.core.deviceoutputeventargs.-ctor.md\":\"B9a6thSr\",\"api_generated_belay.core.deviceoutputeventargs.iserror.md\":\"hQjwidsU\",\"api_generated_belay.core.deviceoutputeventargs.md\":\"busezHAJ\",\"api_generated_belay.core.deviceoutputeventargs.output.md\":\"CaGANKUq\",\"api_generated_belay.core.deviceoutputeventargs.timestamp.md\":\"BdyxrAqZ\",\"api_generated_belay.core.devicereplcapabilities.averageresponsetime.md\":\"Dg2kzy8g\",\"api_generated_belay.core.devicereplcapabilities.detectedplatform.md\":\"By9643g2\",\"api_generated_belay.core.devicereplcapabilities.hasreliableflowcontrol.md\":\"BPXnRkh1\",\"api_generated_belay.core.devicereplcapabilities.maxwindowsize.md\":\"B3dS8ZOr\",\"api_generated_belay.core.devicereplcapabilities.md\":\"BL2l8jOF\",\"api_generated_belay.core.devicereplcapabilities.micropythonversion.md\":\"B3fRezKA\",\"api_generated_belay.core.devicereplcapabilities.preferredwindowsize.md\":\"DUkuP8QI\",\"api_generated_belay.core.devicereplcapabilities.requiresextendedinterruptdelay.md\":\"Cg7V7BmK\",\"api_generated_belay.core.devicereplcapabilities.requiresextendedstartup.md\":\"BRvWo1Lj\",\"api_generated_belay.core.devicereplcapabilities.supportslargecodetransfers.md\":\"B7fRhgod\",\"api_generated_belay.core.devicereplcapabilities.supportsrawpastemode.md\":\"BiSrmres\",\"api_generated_belay.core.devicestate.capabilities.md\":\"DPyBwlQA\",\"api_generated_belay.core.devicestate.clearexecutionhistory.md\":\"CxZF34NT\",\"api_generated_belay.core.devicestate.completeoperation.md\":\"CSP8-PeN\",\"api_generated_belay.core.devicestate.connectionstate.md\":\"ChRbKAFt\",\"api_generated_belay.core.devicestate.currentoperation.md\":\"_6gwIcQI\",\"api_generated_belay.core.devicestate.lastoperationtime.md\":\"D9kMrHMf\",\"api_generated_belay.core.devicestate.md\":\"C3O63O1g\",\"api_generated_belay.core.devicestate.setcurrentoperation.md\":\"ud7DiYNy\",\"api_generated_belay.core.devicestate.tostring.md\":\"B88IVHE4\",\"api_generated_belay.core.devicestatechangeeventargs.-ctor.md\":\"CTxwZKc1\",\"api_generated_belay.core.devicestatechangeeventargs.exception.md\":\"CHVQTCho\",\"api_generated_belay.core.devicestatechangeeventargs.md\":\"B0ErWCwA\",\"api_generated_belay.core.devicestatechangeeventargs.newstate.md\":\"CcQYOhsf\",\"api_generated_belay.core.devicestatechangeeventargs.oldstate.md\":\"bDfIw8aA\",\"api_generated_belay.core.devicestatechangeeventargs.reason.md\":\"L0SxRZbg\",\"api_generated_belay.core.devicestatechangeeventargs.timestamp.md\":\"RdFju5mg\",\"api_generated_belay.core.directexecutor.-ctor.md\":\"DtHqXZSE\",\"api_generated_belay.core.directexecutor.clearcache.md\":\"YbRYoj5f\",\"api_generated_belay.core.directexecutor.dispose.md\":\"C3yJwt2i\",\"api_generated_belay.core.directexecutor.executeasync.md\":\"xs12coST\",\"api_generated_belay.core.directexecutor.executepythonasync.md\":\"BtLJGt8Q\",\"api_generated_belay.core.directexecutor.md\":\"Dk_ASkGp\",\"api_generated_belay.core.examples.environmentreading.humidity.md\":\"BTwJlH6f\",\"api_generated_belay.core.examples.environmentreading.lightlevel.md\":\"Bwa3arkH\",\"api_generated_belay.core.examples.environmentreading.md\":\"CzYJ9oBE\",\"api_generated_belay.core.examples.environmentreading.readingid.md\":\"BBO4W7Ll\",\"api_generated_belay.core.examples.environmentreading.temperature.md\":\"DO9nDccb\",\"api_generated_belay.core.examples.environmentreading.timestamp.md\":\"DMxQUq3w\",\"api_generated_belay.core.examples.environmentreading.tostring.md\":\"BrQKPU6H\",\"api_generated_belay.core.examples.ienvironmentmonitor.calibratesensorsasync.md\":\"DIsVm2-I\",\"api_generated_belay.core.examples.ienvironmentmonitor.cleanuphardwareasync.md\":\"AjKRnEfg\",\"api_generated_belay.core.examples.ienvironmentmonitor.getcurrentreadingasync.md\":\"i8qqzrbk\",\"api_generated_belay.core.examples.ienvironmentmonitor.getdiagnosticsasync.md\":\"Dpc4sUJJ\",\"api_generated_belay.core.examples.ienvironmentmonitor.initializehardwareasync.md\":\"VYZ6L7h_\",\"api_generated_belay.core.examples.ienvironmentmonitor.initializemonitoringstateasync.md\":\"DTknr75Z\",\"api_generated_belay.core.examples.ienvironmentmonitor.loadcalibrationasync.md\":\"Dc5CyU0E\",\"api_generated_belay.core.examples.ienvironmentmonitor.md\":\"3HBGpUg2\",\"api_generated_belay.core.examples.ienvironmentmonitor.savedataasync.md\":\"DTB8ZCY6\",\"api_generated_belay.core.examples.ienvironmentmonitor.startcontinuousmonitoringasync.md\":\"JnyaIHRa\",\"api_generated_belay.core.examples.ienvironmentmonitor.starthealthwatchdogasync.md\":\"vleS1f1b\",\"api_generated_belay.core.examples.ienvironmentmonitor.stopbackgroundthreadsasync.md\":\"DB2eNnxs\",\"api_generated_belay.core.examples.ienvironmentmonitor.stopmonitoringasync.md\":\"Bj5zU10I\",\"api_generated_belay.core.examples.isensordevice.calibrateasync.md\":\"tOsNBhuU\",\"api_generated_belay.core.examples.isensordevice.cleanupsensorasync.md\":\"EkEbXu-i\",\"api_generated_belay.core.examples.isensordevice.getdeviceinfoasync.md\":\"DA4vUu5b\",\"api_generated_belay.core.examples.isensordevice.initializesensorasync.md\":\"B2MJDxrv\",\"api_generated_belay.core.examples.isensordevice.md\":\"ZlLLV0-1\",\"api_generated_belay.core.examples.isensordevice.readhumidityasync.md\":\"PjkHVdFF\",\"api_generated_belay.core.examples.isensordevice.readtemperatureasync.md\":\"DBbOaJbV\",\"api_generated_belay.core.examples.isimplesensordevice.cleanupasync.md\":\"CV7a83F5\",\"api_generated_belay.core.examples.isimplesensordevice.getdeviceinfoasync.md\":\"B1Y9R9oh\",\"api_generated_belay.core.examples.isimplesensordevice.getgreetingasync.md\":\"DhTbFeW3\",\"api_generated_belay.core.examples.isimplesensordevice.initializeasync.md\":\"C-HgDhgV\",\"api_generated_belay.core.examples.isimplesensordevice.md\":\"BTYveFug\",\"api_generated_belay.core.examples.isimplesensordevice.readtemperatureasync.md\":\"BMmCX4ST\",\"api_generated_belay.core.examples.isimplesensordevice.setledasync.md\":\"CsbbZFWa\",\"api_generated_belay.core.examples.md\":\"8OaZV4_h\",\"api_generated_belay.core.examples.simpledevice.-ctor.md\":\"Ci2q35ui\",\"api_generated_belay.core.examples.simpledevice.cleanupasync.md\":\"DuzlmxAh\",\"api_generated_belay.core.examples.simpledevice.getgreetingasync.md\":\"CjUdAbzb\",\"api_generated_belay.core.examples.simpledevice.initializeasync.md\":\"DAVwX8pY\",\"api_generated_belay.core.examples.simpledevice.md\":\"DyvxIqD3\",\"api_generated_belay.core.examples.simpledevice.readtemperatureasync.md\":\"D6nHEos3\",\"api_generated_belay.core.execution.baseexecutor.-ctor.md\":\"44_3HMN0\",\"api_generated_belay.core.execution.baseexecutor.applyexecutionpolicies.md\":\"DuUXOG0E\",\"api_generated_belay.core.execution.baseexecutor.canhandle.md\":\"D3FjEqc0\",\"api_generated_belay.core.execution.baseexecutor.cleanupasync.md\":\"kQAcX56x\",\"api_generated_belay.core.execution.baseexecutor.converttopythoncase.md\":\"Dj7BQ3gl\",\"api_generated_belay.core.execution.baseexecutor.dispose.md\":\"CIqfoT-L\",\"api_generated_belay.core.execution.baseexecutor.executeasync.md\":\"C_YWK6G1\",\"api_generated_belay.core.execution.baseexecutor.formatpythonvalue.md\":\"Cq-nbCMn\",\"api_generated_belay.core.execution.baseexecutor.generatedefaultpythoncode.md\":\"BrFZEvhb\",\"api_generated_belay.core.execution.baseexecutor.generatepythoncodeasync.md\":\"DpOkMxma\",\"api_generated_belay.core.execution.baseexecutor.getcachingpolicyfromattributes.md\":\"DGltmJhE\",\"api_generated_belay.core.execution.baseexecutor.gettimeoutfromattributes.md\":\"omG0mhug\",\"api_generated_belay.core.execution.baseexecutor.md\":\"u9V3_BeB\",\"api_generated_belay.core.execution.baseexecutor.priority.md\":\"CQNnNA5q\",\"api_generated_belay.core.execution.baseexecutor.throwifdisposed.md\":\"CIQbcsEu\",\"api_generated_belay.core.execution.executioncontext.-ctor.md\":\"Cd_BjngD\",\"api_generated_belay.core.execution.executioncontext.arguments.md\":\"CLan98GD\",\"api_generated_belay.core.execution.executioncontext.createdat.md\":\"Cbfq3wYy\",\"api_generated_belay.core.execution.executioncontext.declaringtype.md\":\"B1a8_UbT\",\"api_generated_belay.core.execution.executioncontext.device.md\":\"B9pjIHhg\",\"api_generated_belay.core.execution.executioncontext.instance.md\":\"vmzZF13Q\",\"api_generated_belay.core.execution.executioncontext.md\":\"C2BJT5aG\",\"api_generated_belay.core.execution.executioncontext.method.md\":\"mnn-3sxH\",\"api_generated_belay.core.execution.executioncontext.methodname.md\":\"pW6JhjEP\",\"api_generated_belay.core.execution.executioncontext.properties.md\":\"BHCcacFi\",\"api_generated_belay.core.execution.executioncontext.requiresexclusiveaccess.md\":\"BsDFUnDU\",\"api_generated_belay.core.execution.executioncontext.timeout.md\":\"CPyQa7lw\",\"api_generated_belay.core.execution.executioncontext.usecache.md\":\"q7mkJK24\",\"api_generated_belay.core.execution.executioncontextservice.clearcontext.md\":\"DxGcNn10\",\"api_generated_belay.core.execution.executioncontextservice.current.md\":\"Bqu2iEbu\",\"api_generated_belay.core.execution.executioncontextservice.md\":\"BrBNVRPU\",\"api_generated_belay.core.execution.executioncontextservice.setcontext.md\":\"BWedOvbW\",\"api_generated_belay.core.execution.executorframework.-ctor.md\":\"BBXaj7CI\",\"api_generated_belay.core.execution.executorframework.canexecute.md\":\"BSIIdQQW\",\"api_generated_belay.core.execution.executorframework.clearcache.md\":\"DU8yOxcK\",\"api_generated_belay.core.execution.executorframework.dispose.md\":\"Di300dh5\",\"api_generated_belay.core.execution.executorframework.executeasync.md\":\"C5Uy8WnR\",\"api_generated_belay.core.execution.executorframework.getstatistics.md\":\"2yrFX2mX\",\"api_generated_belay.core.execution.executorframework.md\":\"QfmmmV58\",\"api_generated_belay.core.execution.executorframework.registerexecutor.md\":\"BzzqAeaV\",\"api_generated_belay.core.execution.executormanager.-ctor.md\":\"BbX8wXn7\",\"api_generated_belay.core.execution.executormanager.clearcache.md\":\"CgKTCLdW\",\"api_generated_belay.core.execution.executormanager.dispose.md\":\"DeA0NaU7\",\"api_generated_belay.core.execution.executormanager.executeasync.md\":\"CJja_p0D\",\"api_generated_belay.core.execution.executormanager.getexecutorstatistics.md\":\"RfvWEeWp\",\"api_generated_belay.core.execution.executormanager.md\":\"Bn9ShQlF\",\"api_generated_belay.core.execution.executormanager.registerexecutor.md\":\"DkqCdQKP\",\"api_generated_belay.core.execution.iexecutioncontextservice.clearcontext.md\":\"B6E4xQ5W\",\"api_generated_belay.core.execution.iexecutioncontextservice.current.md\":\"J_vlslRA\",\"api_generated_belay.core.execution.iexecutioncontextservice.md\":\"N9kYMMRB\",\"api_generated_belay.core.execution.iexecutioncontextservice.setcontext.md\":\"uvSAVFuF\",\"api_generated_belay.core.execution.iexecutor.canhandle.md\":\"Cxrq3OSb\",\"api_generated_belay.core.execution.iexecutor.cleanupasync.md\":\"ZSvTFmk1\",\"api_generated_belay.core.execution.iexecutor.executeasync.md\":\"B-_YB5pm\",\"api_generated_belay.core.execution.iexecutor.md\":\"CmcVuCWy\",\"api_generated_belay.core.execution.iexecutor.priority.md\":\"OI6Z4neQ\",\"api_generated_belay.core.execution.imethodexecutioncontext.instance.md\":\"BIbyYsk7\",\"api_generated_belay.core.execution.imethodexecutioncontext.md\":\"DclOPr8V\",\"api_generated_belay.core.execution.imethodexecutioncontext.method.md\":\"Bw9Nplg6\",\"api_generated_belay.core.execution.imethodexecutioncontext.methodname.md\":\"D0yo_P-P\",\"api_generated_belay.core.execution.imethodexecutioncontext.parameters.md\":\"C8FNJYep\",\"api_generated_belay.core.execution.imethodexecutioncontext.setupattribute.md\":\"CGVktDLJ\",\"api_generated_belay.core.execution.imethodexecutioncontext.taskattribute.md\":\"DHCDxOMN\",\"api_generated_belay.core.execution.imethodexecutioncontext.teardownattribute.md\":\"5NNGE8T-\",\"api_generated_belay.core.execution.imethodexecutioncontext.threadattribute.md\":\"Be27HHYK\",\"api_generated_belay.core.execution.md\":\"CTGjVspc\",\"api_generated_belay.core.execution.methodexecutioncontext.-ctor.md\":\"LBBaZ7y4\",\"api_generated_belay.core.execution.methodexecutioncontext.formethodname.md\":\"08_9Syds\",\"api_generated_belay.core.execution.methodexecutioncontext.instance.md\":\"DIri9fc1\",\"api_generated_belay.core.execution.methodexecutioncontext.md\":\"P0M7Jj8Y\",\"api_generated_belay.core.execution.methodexecutioncontext.method.md\":\"By22QXvc\",\"api_generated_belay.core.execution.methodexecutioncontext.methodname.md\":\"glf5YDJF\",\"api_generated_belay.core.execution.methodexecutioncontext.parameters.md\":\"BUu-3L2d\",\"api_generated_belay.core.execution.methodexecutioncontext.setupattribute.md\":\"DEZPZBLO\",\"api_generated_belay.core.execution.methodexecutioncontext.taskattribute.md\":\"BZKIIGs4\",\"api_generated_belay.core.execution.methodexecutioncontext.teardownattribute.md\":\"Cd9Zf513\",\"api_generated_belay.core.execution.methodexecutioncontext.threadattribute.md\":\"B2R_-DZ3\",\"api_generated_belay.core.execution.methodexecutioncontext.withtaskattribute.md\":\"_KjngsNp\",\"api_generated_belay.core.execution.setupexecutor.-ctor.md\":\"C5FZH-Oe\",\"api_generated_belay.core.execution.setupexecutor.applyexecutionpolicies.md\":\"CvkbtF7D\",\"api_generated_belay.core.execution.setupexecutor.canhandle.md\":\"BiHME_Wy\",\"api_generated_belay.core.execution.setupexecutor.cleanupasync.md\":\"XG2jG8_C\",\"api_generated_belay.core.execution.setupexecutor.executeasync.md\":\"CRRWXseM\",\"api_generated_belay.core.execution.setupexecutor.generatepythoncodeasync.md\":\"I7SDv2OA\",\"api_generated_belay.core.execution.setupexecutor.getcachingpolicyfromattributes.md\":\"DWmXrGYA\",\"api_generated_belay.core.execution.setupexecutor.gettimeoutfromattributes.md\":\"Cj674S9U\",\"api_generated_belay.core.execution.setupexecutor.md\":\"CGVBYrhj\",\"api_generated_belay.core.execution.setupexecutor.priority.md\":\"cU_fzQzQ\",\"api_generated_belay.core.execution.taskexecutor.-ctor.md\":\"D6pUuUE7\",\"api_generated_belay.core.execution.taskexecutor.applyexecutionpolicies.md\":\"BfhTVI3X\",\"api_generated_belay.core.execution.taskexecutor.canhandle.md\":\"vlmFi2KS\",\"api_generated_belay.core.execution.taskexecutor.generatepythoncodeasync.md\":\"Cz7oNK1U\",\"api_generated_belay.core.execution.taskexecutor.getcachingpolicyfromattributes.md\":\"Btd1eTXY\",\"api_generated_belay.core.execution.taskexecutor.gettimeoutfromattributes.md\":\"CRp3ECz1\",\"api_generated_belay.core.execution.taskexecutor.md\":\"Drq_o6tO\",\"api_generated_belay.core.execution.taskexecutor.priority.md\":\"DfVZwY1g\",\"api_generated_belay.core.execution.teardownexecutor.-ctor.md\":\"Csd4boSr\",\"api_generated_belay.core.execution.teardownexecutor.applyexecutionpolicies.md\":\"BOm1XDDS\",\"api_generated_belay.core.execution.teardownexecutor.canhandle.md\":\"IrfkgQdg\",\"api_generated_belay.core.execution.teardownexecutor.cleanupasync.md\":\"Bt8ys3J4\",\"api_generated_belay.core.execution.teardownexecutor.executeasync.md\":\"BPEU3_ew\",\"api_generated_belay.core.execution.teardownexecutor.executeteardownsequenceasync.md\":\"AaIHf9vM\",\"api_generated_belay.core.execution.teardownexecutor.generatepythoncodeasync.md\":\"D9uLK-pm\",\"api_generated_belay.core.execution.teardownexecutor.getcachingpolicyfromattributes.md\":\"MQo2b8QP\",\"api_generated_belay.core.execution.teardownexecutor.gettimeoutfromattributes.md\":\"Bus2JNG7\",\"api_generated_belay.core.execution.teardownexecutor.md\":\"DP7XbbdF\",\"api_generated_belay.core.execution.teardownexecutor.priority.md\":\"C8qszR59\",\"api_generated_belay.core.execution.threadexecutor.-ctor.md\":\"CW1egHQi\",\"api_generated_belay.core.execution.threadexecutor.applyexecutionpolicies.md\":\"BcAhvvMk\",\"api_generated_belay.core.execution.threadexecutor.canhandle.md\":\"CzJpcayl\",\"api_generated_belay.core.execution.threadexecutor.cleanupasync.md\":\"CkQTTZI5\",\"api_generated_belay.core.execution.threadexecutor.executeasync.md\":\"BnivonYF\",\"api_generated_belay.core.execution.threadexecutor.generatepythoncodeasync.md\":\"BEG8larB\",\"api_generated_belay.core.execution.threadexecutor.getactivethreadsinfo.md\":\"BHzKEN3S\",\"api_generated_belay.core.execution.threadexecutor.getcachingpolicyfromattributes.md\":\"BDRbyQLS\",\"api_generated_belay.core.execution.threadexecutor.gettimeoutfromattributes.md\":\"o-SXRTpc\",\"api_generated_belay.core.execution.threadexecutor.md\":\"DQ2PFthn\",\"api_generated_belay.core.execution.threadexecutor.priority.md\":\"ut_J04yT\",\"api_generated_belay.core.execution.threadexecutor.stopallthreadsasync.md\":\"D96Q3RN6\",\"api_generated_belay.core.execution.threadexecutor.stopthreadasync.md\":\"tbG_uC6n\",\"api_generated_belay.core.ideviceconnection.connect.md\":\"DVhDw2nP\",\"api_generated_belay.core.ideviceconnection.connectionstring.md\":\"6PPjZz2Q\",\"api_generated_belay.core.ideviceconnection.deletefile.md\":\"Jk_Mjq5O\",\"api_generated_belay.core.ideviceconnection.deviceinfo.md\":\"Ccdm_cHj\",\"api_generated_belay.core.ideviceconnection.disconnect.md\":\"BQa9TjdQ\",\"api_generated_belay.core.ideviceconnection.executepython.md\":\"Cq29plIh\",\"api_generated_belay.core.ideviceconnection.isconnected.md\":\"BgPbc4xI\",\"api_generated_belay.core.ideviceconnection.listfiles.md\":\"pGyuMQ7J\",\"api_generated_belay.core.ideviceconnection.md\":\"2pDg43mN\",\"api_generated_belay.core.ideviceconnection.readfile.md\":\"CsiQ2ZHC\",\"api_generated_belay.core.ideviceconnection.writefile.md\":\"EE5BJBuk\",\"api_generated_belay.core.linuxserialconnection.-ctor.md\":\"3YjV_RQf\",\"api_generated_belay.core.linuxserialconnection.close.md\":\"BsHEMmYh\",\"api_generated_belay.core.linuxserialconnection.dispose.md\":\"DhuHzvW0\",\"api_generated_belay.core.linuxserialconnection.getstream.md\":\"DFxXJYWb\",\"api_generated_belay.core.linuxserialconnection.isopen.md\":\"DRwYGEH-\",\"api_generated_belay.core.linuxserialconnection.md\":\"CWd3ZpYq\",\"api_generated_belay.core.linuxserialconnection.openasync.md\":\"CKdYK_mw\",\"api_generated_belay.core.linuxserialconnection.readexistingasync.md\":\"DAs5Alug\",\"api_generated_belay.core.linuxserialconnection.writeasync.md\":\"Bjxnx2s9\",\"api_generated_belay.core.md\":\"CJhocStt\",\"api_generated_belay.core.processserialconnection.-ctor.md\":\"CObMgk5O\",\"api_generated_belay.core.processserialconnection.close.md\":\"TwimE2df\",\"api_generated_belay.core.processserialconnection.dispose.md\":\"C33jMFv6\",\"api_generated_belay.core.processserialconnection.isopen.md\":\"D3kVMkns\",\"api_generated_belay.core.processserialconnection.md\":\"0nWGx441\",\"api_generated_belay.core.processserialconnection.openasync.md\":\"BEqtAFG4\",\"api_generated_belay.core.processserialconnection.readwithtimeoutasync.md\":\"Czi5GJUn\",\"api_generated_belay.core.processserialconnection.writeasync.md\":\"CUR_6gPC\",\"api_generated_belay.core.rawreplconfiguration.baseresponsetimeout.md\":\"DSF3uKT1\",\"api_generated_belay.core.rawreplconfiguration.enablerawpasteautodetection.md\":\"D1dcKY8t\",\"api_generated_belay.core.rawreplconfiguration.enableverboselogging.md\":\"Kv5KY_t9\",\"api_generated_belay.core.rawreplconfiguration.interruptdelay.md\":\"D_Ctr8DC\",\"api_generated_belay.core.rawreplconfiguration.maximumwindowsize.md\":\"CVDlYucb\",\"api_generated_belay.core.rawreplconfiguration.maxresponsetimeout.md\":\"BGXN6k96\",\"api_generated_belay.core.rawreplconfiguration.maxretryattempts.md\":\"BBo-gupq\",\"api_generated_belay.core.rawreplconfiguration.maxstartupdelay.md\":\"CmUoJ9E4\",\"api_generated_belay.core.rawreplconfiguration.md\":\"ChiArEA1\",\"api_generated_belay.core.rawreplconfiguration.preferredwindowsize.md\":\"BeaHCdHz\",\"api_generated_belay.core.rawreplconfiguration.retrydelay.md\":\"CMhYi5G_\",\"api_generated_belay.core.rawreplconfiguration.startupdelay.md\":\"DGYm6YMe\",\"api_generated_belay.core.rawreplprotocol.enter_raw.md\":\"Db2Y_SVR\",\"api_generated_belay.core.rawreplprotocol.execute.md\":\"BKD4nq5r\",\"api_generated_belay.core.rawreplprotocol.executecode.md\":\"C2uGWItX\",\"api_generated_belay.core.rawreplprotocol.executecodewithpaste.md\":\"4qhl7lJC\",\"api_generated_belay.core.rawreplprotocol.exit_raw.md\":\"C-XdoiDN\",\"api_generated_belay.core.rawreplprotocol.interrupt.md\":\"V6QvPz7d\",\"api_generated_belay.core.rawreplprotocol.md\":\"MXqu49J1\",\"api_generated_belay.core.rawreplprotocol.raw_paste.md\":\"DQYaQyYB\",\"api_generated_belay.core.rawreplresponse.erroroutput.md\":\"C9wRMefY\",\"api_generated_belay.core.rawreplresponse.exception.md\":\"b0CBVVal\",\"api_generated_belay.core.rawreplresponse.issuccess.md\":\"BCSGJNej\",\"api_generated_belay.core.rawreplresponse.md\":\"C10en8dI\",\"api_generated_belay.core.rawreplresponse.output.md\":\"CtHoR1ZA\",\"api_generated_belay.core.rawreplresponse.result.md\":\"CEtpGVox\",\"api_generated_belay.core.rawreplstate.md\":\"D46JZaQE\",\"api_generated_belay.core.replprotocolmetrics.averageoperationtime.md\":\"Bxj5k6tX\",\"api_generated_belay.core.replprotocolmetrics.failedoperations.md\":\"BzUsbvWB\",\"api_generated_belay.core.replprotocolmetrics.lastoperationtime.md\":\"DdpRyW6J\",\"api_generated_belay.core.replprotocolmetrics.md\":\"MMubv66T\",\"api_generated_belay.core.replprotocolmetrics.retryattempts.md\":\"D82cqTEw\",\"api_generated_belay.core.replprotocolmetrics.successfuloperations.md\":\"1pAGf2Ok\",\"api_generated_belay.core.resultparser.md\":\"DHbyojf1\",\"api_generated_belay.core.resultparser.parseresult.md\":\"DPhmc9a3\",\"api_generated_belay.core.simplecache.clear.md\":\"lTx5vf22\",\"api_generated_belay.core.simplecache.containskey.md\":\"DsGQqTVF\",\"api_generated_belay.core.simplecache.count.md\":\"JsociqSG\",\"api_generated_belay.core.simplecache.getorcreate.md\":\"UX6BhJCL\",\"api_generated_belay.core.simplecache.getorcreateasync.md\":\"YjRxegyB\",\"api_generated_belay.core.simplecache.md\":\"DzBj_0jr\",\"api_generated_belay.core.simplecache.remove.md\":\"DTAy6Ucx\",\"api_generated_belay.core.simpledevicecapabilities.availablememory.md\":\"CQ_CGDa9\",\"api_generated_belay.core.simpledevicecapabilities.detectioncomplete.md\":\"CdUm8lB_\",\"api_generated_belay.core.simpledevicecapabilities.md\":\"DyjVx688\",\"api_generated_belay.core.simpledevicecapabilities.platform.md\":\"DLkbCayw\",\"api_generated_belay.core.simpledevicecapabilities.supportedfeatures.md\":\"e8E008O5\",\"api_generated_belay.core.simpledevicecapabilities.supportsfeature.md\":\"s2nipDdU\",\"api_generated_belay.core.simpledevicecapabilities.tostring.md\":\"Dne19Z7k\",\"api_generated_belay.core.simpledevicecapabilities.version.md\":\"Cmnk9cHT\",\"api_generated_belay.core.simpledevicefeatureset.md\":\"I57j9XlT\",\"api_generated_belay.core.simplifiedcapabilitydetection.detectasync.md\":\"Cjtke2O_\",\"api_generated_belay.core.simplifiedcapabilitydetection.md\":\"BH5fmrvC\",\"api_generated_belay.core.simplifieddevice.-ctor.md\":\"CicSSkg-\",\"api_generated_belay.core.simplifieddevice.connect.md\":\"D9TvKITA\",\"api_generated_belay.core.simplifieddevice.connectionstring.md\":\"CMZ1u9OA\",\"api_generated_belay.core.simplifieddevice.deletefile.md\":\"CKpejK5L\",\"api_generated_belay.core.simplifieddevice.deviceinfo.md\":\"DVYajLDO\",\"api_generated_belay.core.simplifieddevice.disconnect.md\":\"CUqWWkXK\",\"api_generated_belay.core.simplifieddevice.disconnectasync.md\":\"BDXHmG3C\",\"api_generated_belay.core.simplifieddevice.dispose.md\":\"D8ySbZoa\",\"api_generated_belay.core.simplifieddevice.executemethod.md\":\"PdUU0UYh\",\"api_generated_belay.core.simplifieddevice.executepython.md\":\"YdYpLqqE\",\"api_generated_belay.core.simplifieddevice.isconnected.md\":\"BTcJVGuz\",\"api_generated_belay.core.simplifieddevice.listfiles.md\":\"CDcSY_VZ\",\"api_generated_belay.core.simplifieddevice.md\":\"wEttu3TG\",\"api_generated_belay.core.simplifieddevice.readfile.md\":\"BtuK7PuG\",\"api_generated_belay.core.simplifieddevice.writefile.md\":\"BpdpTSZl\",\"api_generated_belay.core.testing.md\":\"B2FMCBDN\",\"api_generated_belay.core.testing.micropythonunixport.buildunixport.md\":\"xvm_5Rpj\",\"api_generated_belay.core.testing.micropythonunixport.buildunixportasync.md\":\"xeMZeSoW\",\"api_generated_belay.core.testing.micropythonunixport.findexecutableasync.md\":\"5glpGyNN\",\"api_generated_belay.core.testing.micropythonunixport.findmicropythonexecutable.md\":\"97n2qMkP\",\"api_generated_belay.core.testing.micropythonunixport.getbuiltexecutablepath.md\":\"CZgkS9yD\",\"api_generated_belay.core.testing.micropythonunixport.isvalidmicropythonexecutableasync.md\":\"CN_z42Hx\",\"api_generated_belay.core.testing.micropythonunixport.md\":\"BT3R2H2-\",\"api_generated_belay.core.testing.micropythonunixportlogger.md\":\"DeYWDkDc\",\"api_generated_belay.core.testing.subprocesstesthelper.createtestdeviceasync.md\":\"Fkuo6lSZ\",\"api_generated_belay.core.testing.subprocesstesthelper.getmicropythonexecutableasync.md\":\"D4bGC5uI\",\"api_generated_belay.core.testing.subprocesstesthelper.ismicropythonavailableasync.md\":\"BQVahwvC\",\"api_generated_belay.core.testing.subprocesstesthelper.md\":\"DVDRQcJX\",\"api_generated_belay.extensions.belayhealthcheckoptions.adddevicecheck.md\":\"C0FgwwVs\",\"api_generated_belay.extensions.belayhealthcheckoptions.devicehealthchecks.md\":\"BZ-uujh8\",\"api_generated_belay.extensions.belayhealthcheckoptions.md\":\"C3SrwMjS\",\"api_generated_belay.extensions.belayhealthcheckoptions.systemhealthchecktimeoutseconds.md\":\"Dv7ty3DX\",\"api_generated_belay.extensions.configuration.belayconfiguration.communication.md\":\"DdGRmv2L\",\"api_generated_belay.extensions.configuration.belayconfiguration.device.md\":\"CQdM_dVN\",\"api_generated_belay.extensions.configuration.belayconfiguration.exceptionhandling.md\":\"mNOfg8EB\",\"api_generated_belay.extensions.configuration.belayconfiguration.executor.md\":\"DGgCc9s7\",\"api_generated_belay.extensions.configuration.belayconfiguration.md\":\"Clm_Kwry\",\"api_generated_belay.extensions.configuration.communicationconfiguration.md\":\"BlNwXkxl\",\"api_generated_belay.extensions.configuration.communicationconfiguration.rawrepl.md\":\"B1hDrst3\",\"api_generated_belay.extensions.configuration.communicationconfiguration.serial.md\":\"C87nQId5\",\"api_generated_belay.extensions.configuration.deviceconfiguration.defaultcommandtimeoutms.md\":\"D6OnSxPe\",\"api_generated_belay.extensions.configuration.deviceconfiguration.defaultconnectiontimeoutms.md\":\"EJL8m4VC\",\"api_generated_belay.extensions.configuration.deviceconfiguration.discovery.md\":\"C_unmR-2\",\"api_generated_belay.extensions.configuration.deviceconfiguration.md\":\"BDW_X_BX\",\"api_generated_belay.extensions.configuration.deviceconfiguration.retry.md\":\"CXSxpEwY\",\"api_generated_belay.extensions.configuration.devicediscoveryconfiguration.discoverytimeoutms.md\":\"BvSQcqxB\",\"api_generated_belay.extensions.configuration.devicediscoveryconfiguration.enableautodiscovery.md\":\"BSUrf89t\",\"api_generated_belay.extensions.configuration.devicediscoveryconfiguration.md\":\"uBmUR_h7\",\"api_generated_belay.extensions.configuration.devicediscoveryconfiguration.serialportpatterns.md\":\"DVuc7fsH\",\"api_generated_belay.extensions.configuration.exceptionhandlingconfiguration.exceptionloglevel.md\":\"fwAwwD8z\",\"api_generated_belay.extensions.configuration.exceptionhandlingconfiguration.includestacktraces.md\":\"txZSNJYc\",\"api_generated_belay.extensions.configuration.exceptionhandlingconfiguration.logexceptions.md\":\"BoaohEwE\",\"api_generated_belay.extensions.configuration.exceptionhandlingconfiguration.maxcontextentries.md\":\"47zdMNav\",\"api_generated_belay.extensions.configuration.exceptionhandlingconfiguration.md\":\"Cgzq8y1h\",\"api_generated_belay.extensions.configuration.exceptionhandlingconfiguration.preservecontext.md\":\"Cb5pRIIx\",\"api_generated_belay.extensions.configuration.exceptionhandlingconfiguration.rethrowexceptions.md\":\"C_ssFXh7\",\"api_generated_belay.extensions.configuration.executorconfiguration.cacheexpirationms.md\":\"Bos_oBwE\",\"api_generated_belay.extensions.configuration.executorconfiguration.defaulttasktimeoutms.md\":\"Dg5sXFW4\",\"api_generated_belay.extensions.configuration.executorconfiguration.enablecachingbydefault.md\":\"CF92fZe_\",\"api_generated_belay.extensions.configuration.executorconfiguration.maxcachesize.md\":\"CmFD-nBm\",\"api_generated_belay.extensions.configuration.executorconfiguration.md\":\"Cbx34mbL\",\"api_generated_belay.extensions.configuration.md\":\"CNusZHog\",\"api_generated_belay.extensions.configuration.rawreplconfiguration.initializationtimeoutms.md\":\"BbaYwfhq\",\"api_generated_belay.extensions.configuration.rawreplconfiguration.maxretries.md\":\"BKOZVAmB\",\"api_generated_belay.extensions.configuration.rawreplconfiguration.md\":\"D-SwQUJ1\",\"api_generated_belay.extensions.configuration.rawreplconfiguration.windowsize.md\":\"Dy8yOdZH\",\"api_generated_belay.extensions.configuration.retryconfiguration.backoffmultiplier.md\":\"BpSJtngJ\",\"api_generated_belay.extensions.configuration.retryconfiguration.initialretrydelayms.md\":\"CW9T7qeK\",\"api_generated_belay.extensions.configuration.retryconfiguration.maxretries.md\":\"ClhGYzMI\",\"api_generated_belay.extensions.configuration.retryconfiguration.maxretrydelayms.md\":\"sOQWwVs1\",\"api_generated_belay.extensions.configuration.retryconfiguration.md\":\"DleRwzXj\",\"api_generated_belay.extensions.configuration.serialconfiguration.defaultbaudrate.md\":\"DU-WPWo3\",\"api_generated_belay.extensions.configuration.serialconfiguration.md\":\"B4Bp5wYC\",\"api_generated_belay.extensions.configuration.serialconfiguration.readtimeoutms.md\":\"BLmH_N8i\",\"api_generated_belay.extensions.configuration.serialconfiguration.writetimeoutms.md\":\"CIgSrM-h\",\"api_generated_belay.extensions.devicehealthcheckconfiguration.md\":\"DS7t6XWf\",\"api_generated_belay.extensions.devicehealthcheckconfiguration.name.md\":\"CeS3fN4t\",\"api_generated_belay.extensions.devicehealthcheckconfiguration.portorpath.md\":\"DLXM01X6\",\"api_generated_belay.extensions.devicehealthcheckconfiguration.timeoutseconds.md\":\"Ct5Azrvu\",\"api_generated_belay.extensions.examples.configurationexample.exampleappsettings.md\":\"CC9hW6kz\",\"api_generated_belay.extensions.examples.configurationexample.md\":\"D6hwuQfh\",\"api_generated_belay.extensions.examples.diusageexample.configurewebapplication.md\":\"CFBlany5\",\"api_generated_belay.extensions.examples.diusageexample.imydeviceservice.md\":\"CiJNZ9jZ\",\"api_generated_belay.extensions.examples.diusageexample.imydeviceservice.rundeviceoperationsasync.md\":\"ethzzoJc\",\"api_generated_belay.extensions.examples.diusageexample.md\":\"BdFvXq75\",\"api_generated_belay.extensions.examples.diusageexample.mydeviceservice.-ctor.md\":\"DZrOecXf\",\"api_generated_belay.extensions.examples.diusageexample.mydeviceservice.md\":\"1iC-HipJ\",\"api_generated_belay.extensions.examples.diusageexample.mydeviceservice.rundeviceoperationsasync.md\":\"w6yi2AAn\",\"api_generated_belay.extensions.examples.diusageexample.runconsoleexample.md\":\"DIvibRgf\",\"api_generated_belay.extensions.examples.md\":\"umVfZ7mH\",\"api_generated_belay.extensions.factories.icommunicatorfactory.createserialcommunicator.md\":\"D9ENhJ3W\",\"api_generated_belay.extensions.factories.icommunicatorfactory.createsubprocesscommunicator.md\":\"BzzNsesg\",\"api_generated_belay.extensions.factories.icommunicatorfactory.md\":\"EUyBg5jB\",\"api_generated_belay.extensions.factories.idevicefactory.createdevice.md\":\"cb5Dryk9\",\"api_generated_belay.extensions.factories.idevicefactory.createserialdevice.md\":\"D7cMncCC\",\"api_generated_belay.extensions.factories.idevicefactory.createsubprocessdevice.md\":\"kIK9Q1C5\",\"api_generated_belay.extensions.factories.idevicefactory.md\":\"AFT_M4-w\",\"api_generated_belay.extensions.factories.iexecutorfactory.getsetupexecutor.md\":\"QxnsEokB\",\"api_generated_belay.extensions.factories.iexecutorfactory.gettaskexecutor.md\":\"BxkowXL2\",\"api_generated_belay.extensions.factories.iexecutorfactory.getteardownexecutor.md\":\"BXF4PklX\",\"api_generated_belay.extensions.factories.iexecutorfactory.getthreadexecutor.md\":\"BKKIy4Oe\",\"api_generated_belay.extensions.factories.iexecutorfactory.md\":\"DGLAHN5F\",\"api_generated_belay.extensions.factories.md\":\"nSlawYMS\",\"api_generated_belay.extensions.healthchecks.belayhealthcheck.-ctor.md\":\"CcRetafa\",\"api_generated_belay.extensions.healthchecks.belayhealthcheck.checkhealthasync.md\":\"BReXUWvV\",\"api_generated_belay.extensions.healthchecks.belayhealthcheck.md\":\"jrNrSSOm\",\"api_generated_belay.extensions.healthchecks.deviceconnectivityhealthcheck.-ctor.md\":\"DUkrlPn4\",\"api_generated_belay.extensions.healthchecks.deviceconnectivityhealthcheck.checkhealthasync.md\":\"7EXb7BXa\",\"api_generated_belay.extensions.healthchecks.deviceconnectivityhealthcheck.md\":\"kiAtSvf7\",\"api_generated_belay.extensions.healthchecks.md\":\"1LnGhtHX\",\"api_generated_belay.extensions.md\":\"qYKvMx82\",\"api_generated_belay.extensions.servicecollectionextensions.addbelay.md\":\"DdxP--qn\",\"api_generated_belay.extensions.servicecollectionextensions.addbelaycore.md\":\"C6PeHPjp\",\"api_generated_belay.extensions.servicecollectionextensions.addbelayexecutors.md\":\"mCORy9Tc\",\"api_generated_belay.extensions.servicecollectionextensions.addbelayfactories.md\":\"DOMeYaNZ\",\"api_generated_belay.extensions.servicecollectionextensions.addbelayhealthchecks.md\":\"BUT_WSYI\",\"api_generated_belay.extensions.servicecollectionextensions.getbelaydevicefactory.md\":\"D-AqCrNr\",\"api_generated_belay.extensions.servicecollectionextensions.getbelayexecutorfactory.md\":\"rczPa52S\",\"api_generated_belay.extensions.servicecollectionextensions.md\":\"XalddQ7H\",\"api_generated_belay.md\":\"BB0Ooic8\",\"api_generated_belay.sync.deviceextensions.filesystem.md\":\"2eSGwwDJ\",\"api_generated_belay.sync.deviceextensions.getfilesystem.md\":\"DAyBM20s\",\"api_generated_belay.sync.deviceextensions.md\":\"z9Mm7t9K\",\"api_generated_belay.sync.devicefileinfo.checksum.md\":\"CwNPuHUc\",\"api_generated_belay.sync.devicefileinfo.isdirectory.md\":\"DrfveaI3\",\"api_generated_belay.sync.devicefileinfo.lastmodified.md\":\"gMaCpEZU\",\"api_generated_belay.sync.devicefileinfo.md\":\"GtNLtsnK\",\"api_generated_belay.sync.devicefileinfo.path.md\":\"CQk3oYfO\",\"api_generated_belay.sync.devicefileinfo.size.md\":\"Backx1Vu\",\"api_generated_belay.sync.devicefilesystem.-ctor.md\":\"GY_5ovlQ\",\"api_generated_belay.sync.devicefilesystem.calculatechecksumasync.md\":\"CcMNPxV7\",\"api_generated_belay.sync.devicefilesystem.createdirectoryasync.md\":\"B6aPxnvT\",\"api_generated_belay.sync.devicefilesystem.deletedirectoryasync.md\":\"B3JXRo7y\",\"api_generated_belay.sync.devicefilesystem.deletefileasync.md\":\"BGBdhzVj\",\"api_generated_belay.sync.devicefilesystem.existsasync.md\":\"DyxYYXbl\",\"api_generated_belay.sync.devicefilesystem.getfileinfoasync.md\":\"D2Ab-2OW\",\"api_generated_belay.sync.devicefilesystem.listasync.md\":\"MMPe-SLs\",\"api_generated_belay.sync.devicefilesystem.md\":\"ChxSirBT\",\"api_generated_belay.sync.devicefilesystem.readfileasync.md\":\"D1EAJEw3\",\"api_generated_belay.sync.devicefilesystem.readtextfileasync.md\":\"C_b7yKqj\",\"api_generated_belay.sync.devicefilesystem.writefileasync.md\":\"HJD9GGMS\",\"api_generated_belay.sync.devicefilesystem.writetextfileasync.md\":\"DAVHQKC6\",\"api_generated_belay.sync.devicepathutil.combine.md\":\"P5JHbpYF\",\"api_generated_belay.sync.devicepathutil.deviceroot.md\":\"Bd0qqUAi\",\"api_generated_belay.sync.devicepathutil.deviceseparator.md\":\"BRrMNp9j\",\"api_generated_belay.sync.devicepathutil.fromhostpath.md\":\"D4lxmup_\",\"api_generated_belay.sync.devicepathutil.getdirectoryname.md\":\"CxqxkP5D\",\"api_generated_belay.sync.devicepathutil.getextension.md\":\"CUJeasU-\",\"api_generated_belay.sync.devicepathutil.getfilename.md\":\"C4E4uKAR\",\"api_generated_belay.sync.devicepathutil.getfilenamewithoutextension.md\":\"CRGwp3Sr\",\"api_generated_belay.sync.devicepathutil.isunderdirectory.md\":\"an5SXLZV\",\"api_generated_belay.sync.devicepathutil.isvalidpath.md\":\"DtSSxmJV\",\"api_generated_belay.sync.devicepathutil.md\":\"B530KRBG\",\"api_generated_belay.sync.devicepathutil.normalizepath.md\":\"D4j7pdIv\",\"api_generated_belay.sync.devicepathutil.tohostpath.md\":\"9mD9J-ga\",\"api_generated_belay.sync.idevicefilesystem.calculatechecksumasync.md\":\"uwcFvqZZ\",\"api_generated_belay.sync.idevicefilesystem.createdirectoryasync.md\":\"B3UiyDCf\",\"api_generated_belay.sync.idevicefilesystem.deletedirectoryasync.md\":\"BcfItnWb\",\"api_generated_belay.sync.idevicefilesystem.deletefileasync.md\":\"BueMAnxE\",\"api_generated_belay.sync.idevicefilesystem.existsasync.md\":\"CkXSJZCH\",\"api_generated_belay.sync.idevicefilesystem.getfileinfoasync.md\":\"BzaXdsAI\",\"api_generated_belay.sync.idevicefilesystem.listasync.md\":\"YBGAz930\",\"api_generated_belay.sync.idevicefilesystem.md\":\"DuBINmPU\",\"api_generated_belay.sync.idevicefilesystem.readfileasync.md\":\"BzSczg3O\",\"api_generated_belay.sync.idevicefilesystem.readtextfileasync.md\":\"DHUVWei7\",\"api_generated_belay.sync.idevicefilesystem.writefileasync.md\":\"PlkNKWQ7\",\"api_generated_belay.sync.idevicefilesystem.writetextfileasync.md\":\"DP2TBTWO\",\"api_generated_belay.sync.md\":\"DnydfKPR\",\"api_index.md\":\"BJWcsj3-\",\"api_versions.md\":\"BW9ec4cM\",\"api_versions_v0.3.0-alpha_index.md\":\"FqXWoZkb\",\"articles_attributes-reference.md\":\"BLJh1LgI\",\"articles_device-programming.md\":\"DiDXrz2N\",\"articles_getting-started.md\":\"DlMzxvM1\",\"articles_hardware-testing.md\":\"DK548tkF\",\"changelog.md\":\"Br8oDCIN\",\"claude.md\":\"Ck0-OIkD\",\"contributing.md\":\"COfINIgi\",\"deployment_instructions.md\":\"C_qT4UlV\",\"examples_aspnet-core.md\":\"PPYjkxtP\",\"examples_background-services.md\":\"Bzc71dJm\",\"examples_custom-attributes.md\":\"BtyGZVlJ\",\"examples_error-handling.md\":\"CaQVyc9g\",\"examples_first-connection.md\":\"BQ4fsDa7\",\"examples_index.md\":\"CA0tUhZi\",\"examples_led-control.md\":\"1xkXTlqq\",\"examples_multiple-devices.md\":\"BWnbqDfs\",\"examples_sensor-reading.md\":\"EIo_SCsh\",\"guide_attributes.md\":\"C43Wqqol\",\"guide_configuration.md\":\"woCOQHhm\",\"guide_dependency-injection.md\":\"w_cLEtNJ\",\"guide_device-communication.md\":\"ChVme7Xv\",\"guide_enhanced-executor.md\":\"GNQ6cDU4\",\"guide_error-handling.md\":\"BptGglGk\",\"guide_getting-started.md\":\"Bh3o7fLW\",\"guide_health-monitoring.md\":\"xOTvMO1J\",\"guide_installation.md\":\"DF_W2Ykq\",\"guide_introduction.md\":\"DUvvXwAg\",\"guide_session-management.md\":\"DObZOUyb\",\"guide_testing.md\":\"Cw0WEk3v\",\"hardware-testing-guide.md\":\"BDyA8YQx\",\"hardware_circuitpython.md\":\"XkRZ1XvH\",\"hardware_compatibility.md\":\"MNJs4HmK\",\"hardware_connections.md\":\"CiDvHGw2\",\"hardware_esp32.md\":\"BuBLTgwL\",\"hardware_index.md\":\"D1ycAgv5\",\"hardware_pyboard.md\":\"DrhVF0Rz\",\"hardware_raspberry-pi-pico.md\":\"0JavjR89\",\"hardware_troubleshooting-connections.md\":\"DMIeN5ik\",\"hardware_troubleshooting-performance.md\":\"B9s_29wb\",\"icds_icd-001-rawreplprotocol.md\":\"DSqPM4Js\",\"icds_icd-002-devicecommunication.md\":\"DGwaSmo7\",\"icds_simplification_roadmap.md\":\"P9JOKwbG\",\"index.md\":\"CGzjyhv5\",\"technical_architecture_session-management.md\":\"ABta5Gp_\",\"technical_index.md\":\"CvkM88RL\",\"technical_protocols_protocol-detection.md\":\"BIWtna01\",\"technical_protocols_raw-paste-mode.md\":\"DKtLl69Q\",\"technical_protocols_raw-repl-protocol.md\":\"CT1qX2a2\",\"urgent_deployment_fix.md\":\"QpJzYuj9\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Belay.NET\",\"description\":\"Control MicroPython devices from .NET with zero friction\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":{\"light\":\"/logo.svg\",\"dark\":\"/logo-dark.svg\",\"width\":32,\"height\":32},\"siteTitle\":\"Belay.NET\",\"nav\":[{\"text\":\"Guide\",\"link\":\"/guide/getting-started\"},{\"text\":\"Examples\",\"link\":\"/examples/\"},{\"text\":\"Hardware\",\"link\":\"/hardware/\"},{\"text\":\"Technical Reference\",\"link\":\"/technical/\"},{\"text\":\"API Reference\",\"link\":\"/api/\"},{\"text\":\"main\",\"items\":[{\"text\":\"All Versions\",\"link\":\"/api/versions\"},{\"text\":\"Changelog\",\"link\":\"/changelog\"},{\"text\":\"Contributing\",\"link\":\"/contributing\"}]}],\"sidebar\":{\"/guide/\":[{\"text\":\"Introduction\",\"items\":[{\"text\":\"What is Belay.NET?\",\"link\":\"/guide/introduction\"},{\"text\":\"Getting Started\",\"link\":\"/guide/getting-started\"},{\"text\":\"Installation\",\"link\":\"/guide/installation\"}]},{\"text\":\"Core Concepts\",\"items\":[{\"text\":\"Device Communication\",\"link\":\"/guide/device-communication\"},{\"text\":\"Attribute Programming\",\"link\":\"/guide/attributes\"},{\"text\":\"Dependency Injection\",\"link\":\"/guide/dependency-injection\"},{\"text\":\"Error Handling\",\"link\":\"/guide/error-handling\"}]},{\"text\":\"Advanced\",\"items\":[{\"text\":\"Enhanced Executor Framework\",\"link\":\"/guide/enhanced-executor\"},{\"text\":\"Session Management\",\"link\":\"/guide/session-management\"},{\"text\":\"Health Monitoring\",\"link\":\"/guide/health-monitoring\"},{\"text\":\"Configuration\",\"link\":\"/guide/configuration\"},{\"text\":\"Testing\",\"link\":\"/guide/testing\"}]}],\"/examples/\":[{\"text\":\"Basic Examples\",\"items\":[{\"text\":\"First Connection\",\"link\":\"/examples/first-connection\"},{\"text\":\"LED Control\",\"link\":\"/examples/led-control\"},{\"text\":\"Sensor Reading\",\"link\":\"/examples/sensor-reading\"},{\"text\":\"Error Handling\",\"link\":\"/examples/error-handling\"}]},{\"text\":\"Advanced Examples\",\"items\":[{\"text\":\"ASP.NET Core Integration\",\"link\":\"/examples/aspnet-core\"},{\"text\":\"Background Services\",\"link\":\"/examples/background-services\"},{\"text\":\"Multiple Devices\",\"link\":\"/examples/multiple-devices\"},{\"text\":\"Custom Attributes\",\"link\":\"/examples/custom-attributes\"}]}],\"/hardware/\":[{\"text\":\"Supported Hardware\",\"items\":[{\"text\":\"Connection Types\",\"link\":\"/hardware/connections\"}]},{\"text\":\"Device Guides\",\"items\":[{\"text\":\"Raspberry Pi Pico\",\"link\":\"/hardware/raspberry-pi-pico\"},{\"text\":\"ESP32\",\"link\":\"/hardware/esp32\"},{\"text\":\"PyBoard\",\"link\":\"/hardware/pyboard\"},{\"text\":\"CircuitPython Devices\",\"link\":\"/hardware/circuitpython\"}]},{\"text\":\"Troubleshooting\",\"items\":[{\"text\":\"Connection Issues\",\"link\":\"/hardware/troubleshooting-connections\"},{\"text\":\"Performance Issues\",\"link\":\"/hardware/troubleshooting-performance\"}]}],\"/technical/\":[{\"text\":\"Overview\",\"items\":[{\"text\":\"Technical Reference\",\"link\":\"/technical/\"}]},{\"text\":\"Protocol Documentation\",\"items\":[{\"text\":\"Raw REPL Protocol Deep Dive\",\"link\":\"/technical/protocols/raw-repl-protocol\"},{\"text\":\"Raw-Paste Mode and Flow Control\",\"link\":\"/technical/protocols/raw-paste-mode\"},{\"text\":\"Adaptive Protocol Detection\",\"link\":\"/technical/protocols/protocol-detection\"}]},{\"text\":\"Architecture Documentation\",\"items\":[{\"text\":\"Session Management Architecture\",\"link\":\"/technical/architecture/session-management\"}]}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/belay-dotnet/Belay.NET\"}],\"footer\":{\"message\":\"Released under the Apache License 2.0.\",\"copyright\":\"Copyright © 2025 Belay.NET Contributors\"},\"editLink\":{\"pattern\":\"https://github.com/belay-dotnet/belay-dotnet.github.io/edit/main/:path\",\"text\":\"Edit this page on GitHub\"},\"search\":{\"provider\":\"local\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>